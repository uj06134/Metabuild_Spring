<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>여행 리스트</title>
    <style>
        .center {
            width: 800px;
            margin: auto;
        }
        a {
            text-decoration: none;
            color: blue;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
<div class="center">
    <h2>
        여행 리스트 화면 (<span th:text="${lists.size()}"></span> /
        <span th:text="${totalCount}"></span>)
    </h2>

    <table border="1">
        <!-- 검색창 -->
        <tr>
            <td colspan="8" style="text-align:center; padding:10px;">
                <form th:action="@{list}" method="get">
                    <select name="whatColumn">
                        <option value="all" th:selected="${whatColumn == 'all'}">전체검색</option>
                        <option value="name" th:selected="${whatColumn == 'name'}">이름</option>
                        <option value="area" th:selected="${whatColumn == 'area'}">지역</option>
                        <option value="style" th:selected="${whatColumn == 'style'}">여행타입</option>
                    </select>
                    <input type="text" name="keyword" th:value="${keyword}">
                    <input type="submit" value="검색">
                </form>
            </td>
        </tr>

            <!-- 컬럼 헤더 -->
        <tr>
            <th>번호</th>
            <th>이름</th>
            <th>나이</th>
            <th>관심지역</th>
            <th>여행타입</th>
            <th>예상비용</th>
            <th>수정</th>
            <th>삭제</th>
        </tr>

        <!-- 데이터 반복 출력 -->
        <th:block th:each="tDto : ${lists}">
            <tr>
                <td th:text="${tDto.num}"></td>
                <td>
                    <a th:href="@{/content_view(num=${tDto.num}, page=${page}, whatColumn=${whatColumn}, keyword=${keyword})}"
                       th:text="${tDto.name}"></a>
                </td>
                <td th:text="${tDto.age}"></td>
                <td th:text="${tDto.areaAsString}"></td>
                <td th:text="${tDto.style}"></td>
                <td th:text="${tDto.price}"></td>
                <td>
                    <a th:href="@{/update(num=${tDto.num}, page=${page}, whatColumn=${whatColumn}, keyword=${keyword})}">수정</a>
                </td>
                <td>
                    <a th:href="@{/delete(num=${tDto.num}, page=${page}, whatColumn=${whatColumn}, keyword=${keyword})}">삭제</a>
                </td>
            </tr>
        </th:block>

        <!-- 삽입 버튼 -->
        <tr>
            <td colspan="8" style="text-align:center;">
                <a href="insert">삽입</a>
            </td>
        </tr>

        <!-- 페이지네이션 -->
        <tr>
            <td colspan="8" style="text-align:center;">
                <span th:if="${page > 1}">
                    <a th:href="@{/list(page=${page-1}, whatColumn=${whatColumn}, keyword=${keyword})}">이전</a>
                </span>

                <span th:each="i : ${#numbers.sequence(1, totalPage)}">
                    <a th:if="${i != page}"
                       th:href="@{/list(page=${i}, whatColumn=${whatColumn}, keyword=${keyword})}"
                       th:text="${i}"></a>

                    <span th:if="${i == page}"
                          th:text="${i}"
                          style="font-weight:bold;color:black"></span>
                </span>

                <span th:if="${page < totalPage}">
                    <a th:href="@{/list(page=${page+1}, whatColumn=${whatColumn}, keyword=${keyword})}">다음</a>
                </span>
            </td>
        </tr>
    </table>
</div>
</body>
</html>
